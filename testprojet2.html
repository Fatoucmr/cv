<!DOCTYPE html>
<html lang="fr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Attrape les Ã‰toiles</title>
Â  Â Â 
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.min.js"></script>

Â  Â  <style>
Â  Â  Â  Â  /* ğŸ¨ CSS du Jeu */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  /* Style de fond pour l'espace */
Â  Â  Â  Â  Â  Â  background-color: #001233;
Â  Â  Â  Â  Â  Â  color: #c5c6c7;
Â  Â  Â  Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  }

Â  Â Â 
Â  Â  Â  Â  #game-screen {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 800px;Â 
Â  Â  Â  Â  Â  Â  height: 600px;Â 
Â  Â  Â  Â  Â  Â  border: 5px solid #4fafff;Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 50px rgba(79, 175, 255, 0.5);
Â  Â  Â  Â  Â  Â  background-color: #000a1a;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  }

Â  Â  Â  Â  #game-container {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transition: opacity 0.5s;
Â  Â  Â  Â  }

Â  Â  Â  Â  #game-container.active {
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  }

Â  Â  Â  Â  #score-board {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 20px;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translateX(-50%);
Â  Â  Â  Â  Â  Â  font-size: 2em;
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  border: 2px solid #ff4fa8;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  background-color: rgba(11, 12, 16, 0.7);
Â  Â  Â  Â  Â  Â  z-index: 100;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Timer */
Â  Â  Â  Â  #countdownExample {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 20px;
Â  Â  Â  Â  Â  Â  right: 20px;
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  border: 2px solid #4fafff;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.1);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-size: 1.5em;
Â  Â  Â  Â  Â  Â  z-index: 100;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Conteneur des boutons et Ã©cran de dÃ©marrage/fin */
Â  Â  Â  Â  #control-panel {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.9);
Â  Â  Â  Â  Â  Â  z-index: 200;
Â  Â  Â  Â  Â  Â  transition: opacity 0.5s;
Â  Â  Â  Â  }

Â  Â  Â  Â  #control-panel.hidden {
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .game-button {
Â  Â  Â  Â  Â  Â  padding: 15px 30px;
Â  Â  Â  Â  Â  Â  margin: 10px;
Â  Â  Â  Â  Â  Â  font-size: 1.5em;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  transition: background-color 0.3s, transform 0.1s;
Â  Â  Â  Â  }

Â  Â  Â  Â  #start-button {
Â  Â  Â  Â  Â  Â  background-color: #ff4fa8;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  #restart-button {
Â  Â  Â  Â  Â  Â  background-color: #4fafff;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .game-button:hover {
Â  Â  Â  Â  Â  Â  transform: scale(1.05);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Style de base de l'Ã©toile */
Â  Â  Â  Â  .star {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  width: 30px;
Â  Â  Â  Â  Â  Â  height: 30px;
Â  Â  Â  Â  Â  Â  background-color: #ff4fa8;
Â  Â  Â  Â  Â  Â  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
Â  Â  Â  Â  Â  Â  animation: pulse 1s infinite alternate;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Keyframes pour l'animation de pulsation */
Â  Â  Â  Â  @keyframes pulse {
Â  Â  Â  Â  Â  Â  from {
Â  Â  Â  Â  Â  Â  Â  Â  transform: scale(1);
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 0.9;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  to {
Â  Â  Â  Â  Â  Â  Â  Â  transform: scale(1.1);
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* ğŸŒŸ Nouveau Style pour le Tableau des Scores */
Â  Â  Â  Â  #score-table {
Â  Â  Â  Â  Â  Â  margin-top: 30px;
Â  Â  Â  Â  Â  Â  border-collapse: collapse;
Â  Â  Â  Â  Â  Â  width: 80%;
Â  Â  Â  Â  Â  Â  max-width: 400px;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  #score-table th, #score-table td {
Â  Â  Â  Â  Â  Â  border: 1px solid #4fafff;
Â  Â  Â  Â  Â  Â  padding: 8px 15px;
Â  Â  Â  Â  Â  Â  font-size: 1.1em;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  #score-table th {
Â  Â  Â  Â  Â  Â  background-color: rgba(79, 175, 255, 0.2);
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  }

Â  Â  </style>
</head>
<body>

Â  Â  <div id="game-screen">
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div id="game-container">
Â  Â  Â  Â  Â  Â  <div id="score-board">Score: <span id="score">0</span></div>

Â  Â  Â  Â  Â  Â  <div id="countdownExample">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="values"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="control-panel">
Â  Â  Â  Â  Â  Â  <h1>Attrape les Ã‰toiles â­</h1>
Â  Â  Â  Â  Â  Â  <p id="message">Cliquez sur DÃ©marrer pour attraper les Ã©toiles !</p>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="high-scores-container"></div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <button id="start-button" class="game-button">DÃ©marrer</button>
Â  Â  Â  Â  Â  Â  <button id="restart-button" class="game-button">Recommencer</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // ğŸ§  JavaScript et Logique du Jeu
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {

Â  Â  Â  Â  Â  Â  const synth = new Tone.Synth().toDestination();

Â  Â  Â  Â  Â  Â  const gameScreen = document.getElementById('game-screen');
Â  Â  Â  Â  Â  Â  const gameContainer = document.getElementById('game-container');
Â  Â  Â  Â  Â  Â  const controlPanel = document.getElementById('control-panel');
Â  Â  Â  Â  Â  Â  const scoreElement = document.getElementById('score');
Â  Â  Â  Â  Â  Â  const countdownDisplay = document.querySelector('#countdownExample .values');
Â  Â  Â  Â  Â  Â  const startButton = document.getElementById('start-button');
Â  Â  Â  Â  Â  Â  const restartButton = document.getElementById('restart-button');
Â  Â  Â  Â  Â  Â  const messageElement = document.getElementById('message');
Â  Â  Â  Â  Â  Â  const highScoresContainer = document.getElementById('high-scores-container'); // Nouveau conteneur

Â  Â  Â  Â  Â  Â  let score = 0;
Â  Â  Â  Â  Â  Â  const initialTime = 60;
Â  Â  Â  Â  Â  Â  let timeLeft = initialTime;
Â  Â  Â  Â  Â  Â  let gameActive = false;
Â  Â  Â  Â  Â  Â  let timerInterval;
Â  Â  Â  Â  Â  Â  let gameLoopInterval;

Â  Â  Â  Â  Â  Â  const STAR_SIZE = 30;
Â  Â  Â  Â  Â  Â  const STAR_LIFETIME_MS = 3000;
Â  Â  Â  Â  Â  Â  const STAR_SPAWN_INTERVAL_MS = 800;

Â  Â  Â  Â  Â  Â  // --- ğŸ¥‡ Fonctions de Gestion des Scores ---

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * Charge les meilleurs scores depuis le localStorage.
Â  Â  Â  Â  Â  Â  Â * @returns {number[]} Liste des scores triÃ©s.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function loadHighScores() {
Â  Â  Â  Â  Â  Â  Â  Â  const scoresString = localStorage.getItem('highScores');
Â  Â  Â  Â  Â  Â  Â  Â  return scoresString ? JSON.parse(scoresString).sort((a, b) => b - a) : [];
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * Ajoute le score actuel aux meilleurs scores et les sauvegarde.
Â  Â  Â  Â  Â  Â  Â * @param {number} newScore - Le score Ã  ajouter.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function saveScore(newScore) {
Â  Â  Â  Â  Â  Â  Â  Â  const scores = loadHighScores();
Â  Â  Â  Â  Â  Â  Â  Â  scores.push(newScore);
Â  Â  Â  Â  Â  Â  Â  Â  scores.sort((a, b) => b - a); // Tri dÃ©croissant
Â  Â  Â  Â  Â  Â  Â  Â  // Garder uniquement le top 5
Â  Â  Â  Â  Â  Â  Â  Â  const topScores = scores.slice(0, 5);
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('highScores', JSON.stringify(topScores));
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * CrÃ©e et affiche le tableau des meilleurs scores.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function displayHighScores() {
Â  Â  Â  Â  Â  Â  Â  Â  const scores = loadHighScores();
Â  Â  Â  Â  Â  Â  Â  Â  highScoresContainer.innerHTML = ''; // Nettoyer l'ancien tableau

Â  Â  Â  Â  Â  Â  Â  Â  if (scores.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  highScoresContainer.innerHTML = '<p>Aucun score prÃ©cÃ©dent enregistrÃ©.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  let tableHTML = '<h2>Meilleurs Scores</h2>';
Â  Â  Â  Â  Â  Â  Â  Â  tableHTML += '<table id="score-table"><thead><tr><th>#</th><th>Score</th></tr></thead><tbody>';

Â  Â  Â  Â  Â  Â  Â  Â  scores.forEach((s, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const rank = index + 1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tableHTML += `<tr><td>${rank}</td><td>${s}</td></tr>`;
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  tableHTML += '</tbody></table>';
Â  Â  Â  Â  Â  Â  Â  Â  highScoresContainer.innerHTML = tableHTML;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // --- ğŸ® Logique du Jeu ModifiÃ©e ---

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * Met Ã  jour le score affichÃ©.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function updateScore() {
Â  Â  Â  Â  Â  Â  Â  Â  score++;
Â  Â  Â  Â  Â  Â  Â  Â  scoreElement.textContent = score;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * Fonction appelÃ©e lorsque le temps est Ã©coulÃ©.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function endGame() {
Â  Â  Â  Â  Â  Â  Â  Â  gameActive = false;
Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(timerInterval);
Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(gameLoopInterval);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // 1. Enregistrer le score
Â  Â  Â  Â  Â  Â  Â  Â  saveScore(score);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // 2. Afficher l'Ã©cran de fin
Â  Â  Â  Â  Â  Â  Â  Â  controlPanel.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  gameContainer.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  countdownDisplay.textContent = "FIN";
Â  Â  Â  Â  Â  Â  Â  Â  messageElement.innerHTML = `Partie terminÃ©e! Votre score final est : <strong>${score}</strong>`;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  startButton.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  restartButton.style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  // 3. Afficher le tableau des meilleurs scores
Â  Â  Â  Â  Â  Â  Â  Â  displayHighScores();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Supprimer toutes les Ã©toiles restantes
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.star').forEach(star => star.remove());
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * DÃ©marre/met Ã  jour le timer.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function updateTimer() {
Â  Â  Â  Â  Â  Â  Â  Â  if (!gameActive) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // On utilise la fonction endGame Ã  la place du code d'origine
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (timeLeft <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Si on arrive ici, c'est que le timer a fini son cycle et que le jeu est inactif
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  countdownDisplay.textContent = "FIN";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  countdownDisplay.textContent = timeLeft + "s";

Â  Â  Â  Â  Â  Â  Â  Â  if (timeLeft <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  endGame(); // Appeler la nouvelle fonction de fin de jeu
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  timeLeft--;
Â  Â  Â  Â  Â  Â  Â  Â  timerInterval = setTimeout(updateTimer, 1000);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * Anime la disparition de l'Ã©toile lorsqu'elle est cliquÃ©e.
Â  Â  Â  Â  Â  Â  Â * @param {HTMLElement} star - L'Ã©lÃ©ment Ã©toile Ã  animer.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function catchStarAnimation(star) {
Â  Â  Â  Â  Â  Â  Â  Â  anime({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  targets: star,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scale: [1, 1.5],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opacity: [1, 0],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundColor: ['#ff4fa8', '#ff77c8'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  duration: 300,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  easing: 'easeOutExpo',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  complete: () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  star.remove();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * CrÃ©e et anime une nouvelle Ã©toile.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function createStar() {
Â  Â  Â  Â  Â  Â  Â  Â  if (!gameActive) return;

Â  Â  Â  Â  Â  Â  Â  Â  const containerWidth = gameScreen.clientWidth;
Â  Â  Â  Â  Â  Â  Â  Â  const containerHeight = gameScreen.clientHeight;

Â  Â  Â  Â  Â  Â  Â  Â  const star = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  star.classList.add('star');

Â  Â  Â  Â  Â  Â  Â  Â  const maxX = containerWidth - STAR_SIZE;
Â  Â  Â  Â  Â  Â  Â  Â  const maxY = containerHeight - STAR_SIZE;
Â  Â  Â  Â  Â  Â  Â  Â  const startX = Math.random() * maxX;
Â  Â  Â  Â  Â  Â  Â  Â  const startY = Math.random() * maxY;
Â  Â  Â  Â  Â  Â  Â  Â  const travelX = Math.random() * maxX;
Â  Â  Â  Â  Â  Â  Â  Â  const travelY = Math.random() * maxY;

Â  Â  Â  Â  Â  Â  Â  Â  star.style.left = `${startX}px`;
Â  Â  Â  Â  Â  Â  Â  Â  star.style.top = `${startY}px`;

Â  Â  Â  Â  Â  Â  Â  Â  gameContainer.appendChild(star);

Â  Â  Â  Â  Â  Â  Â  Â  const starAnimation = anime({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  targets: star,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  translateX: travelX - startX,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  translateY: travelY - startY,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  rotate: '2turn',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opacity: [0.5, 1],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  easing: 'linear',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  duration: STAR_LIFETIME_MS,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  complete: () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (star.parentNode) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  star.remove();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  star.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!gameActive) return; // SÃ©curitÃ© supplÃ©mentaire

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  star.style.pointerEvents = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  starAnimation.pause();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  synth.triggerAttackRelease("C4", "8n");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  catchStarAnimation(star);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateScore();
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * La boucle principale du jeu.
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function gameLoop() {
Â  Â  Â  Â  Â  Â  Â  Â  if (!gameActive) return;
Â  Â  Â  Â  Â  Â  Â  Â  createStar();
Â  Â  Â  Â  Â  Â  Â  Â  gameLoopInterval = setTimeout(gameLoop, STAR_SPAWN_INTERVAL_MS);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  /**
Â  Â  Â  Â  Â  Â  Â * DÃ©marre le jeu
Â  Â  Â  Â  Â  Â  Â */
Â  Â  Â  Â  Â  Â  function startGame() {
Â  Â  Â  Â  Â  Â  Â  Â  // S'assurer que le jeu n'est pas dÃ©jÃ  actif
Â  Â  Â  Â  Â  Â  Â  Â  if (gameActive) return;

Â  Â  Â  Â  Â  Â  Â  Â  gameActive = true;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  controlPanel.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  gameContainer.classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  highScoresContainer.innerHTML = ''; // Cacher le tableau

Â  Â  Â  Â  Â  Â  Â  Â  // DÃ©marrer les boucles
Â  Â  Â  Â  Â  Â  Â  Â  gameLoop();
Â  Â  Â  Â  Â  Â  Â  Â  updateTimer();

Â  Â  Â  Â  Â  Â  Â  Â  startButton.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  restartButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  messageElement.textContent = "";
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function resetGame() {
Â  Â  Â  Â  Â  Â  Â  Â  // ArrÃªter tout
Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(timerInterval);
Â  Â  Â  Â  Â  Â  Â  Â  clearTimeout(gameLoopInterval);

Â  Â  Â  Â  Â  Â  Â  Â  score = 0;
Â  Â  Â  Â  Â  Â  Â  Â  timeLeft = initialTime;
Â  Â  Â  Â  Â  Â  Â  Â  gameActive = false;

Â  Â  Â  Â  Â  Â  Â  Â  scoreElement.textContent = score;
Â  Â  Â  Â  Â  Â  Â  Â  countdownDisplay.textContent = timeLeft + "s";
Â  Â  Â  Â  Â  Â  Â  Â  messageElement.textContent = "Cliquez sur DÃ©marrer pour attraper les Ã©toiles !";
Â  Â  Â  Â  Â  Â  Â  Â  highScoresContainer.innerHTML = ''; // Assurez-vous que le tableau n'est pas lÃ 

Â  Â  Â  Â  Â  Â  Â  Â  startButton.textContent = "DÃ©marrer";
Â  Â  Â  Â  Â  Â  Â  Â  startButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  restartButton.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  controlPanel.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  gameContainer.classList.remove('active');

Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.star').forEach(star => star.remove());
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Afficher le tableau de score initial (si il y en a)
Â  Â  Â  Â  Â  Â  Â  Â  displayHighScores();
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  startButton.addEventListener('click', startGame);
Â  Â  Â  Â  Â  Â  restartButton.addEventListener('click', resetGame);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Initialisation: afficher les meilleurs scores
Â  Â  Â  Â  Â  Â  resetGame();
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
